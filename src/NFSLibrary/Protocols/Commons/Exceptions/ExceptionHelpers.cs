/*
 * Automatically generated by jrpcgen 1.0.7 on 27/08/2010
 * jrpcgen is part of the "Remote Tea.Net" ONC/RPC package for C#
 * See http://remotetea.sourceforge.net for details
 */

namespace NFSLibrary.Protocols.Commons.Exceptions
{
    using System;
    using System.Collections.Generic;

    /// <summary>
    /// Helper class for throwing NFS-specific exceptions based on error codes.
    /// </summary>
    public class ExceptionHelpers
    {
        private static Dictionary<NFSStats, string> ExceptionList()
        {
            Dictionary<NFSStats, string> rDictionary = new Dictionary<NFSStats, string>
            {
                { NFSStats.NFS_OK, "Indicates the call completed successfully" },
                { NFSStats.NFSERR_PERM, "Not owner. The operation was not allowed because the caller is either not a privileged user (root) or not the owner of the target of the operation." },
                { NFSStats.NFSERR_NOENT, "No such file or directory. The file or directory name specified does not exist." },
                { NFSStats.NFSERR_IO, "I/O error. A hard error (for example, a disk error) occurred while processing the requested operation." },
                { NFSStats.NFSERR_NXIO, "I/O error. No such device or address" },
                { NFSStats.NFSERR_ACCES, "Permission denied. The caller does not have the correct permission to perform the requested operation. Contrast this with NFS3ERR_PERM, which restricts itself to owner or privileged user permission failures." },
                { NFSStats.NFSERR_EXIST, "File exists. The file specified already exists." },
                { NFSStats.NFSERR_XDEV, "Attempt to do a cross-device hard link." },
                { NFSStats.NFSERR_NODEV, "No such device." },
                { NFSStats.NFSERR_NOTDIR, "Not a directory. The caller specified a non-directory in a directory operation." },
                { NFSStats.NFSERR_ISDIR, "Is a directory. The caller specified a directory in a non-directory operation." },
                { NFSStats.NFSERR_INVAL, "Invalid argument or unsupported argument for an operation. Two examples are attempting a READLINK on an object other than a symbolic link or attempting to SETATTR a time field on a server that does not support this operation." },
                { NFSStats.NFSERR_FBIG, "File too large. The operation would have caused a file to grow beyond the server's limit." },
                { NFSStats.NFSERR_NOSPC, "No space left on device. The operation would have caused the server's file system to exceed its limit." },
                { NFSStats.NFSERR_ROFS, "Read-only file system. A modifying operation was attempted on a read-only file system." },
                { NFSStats.NFSERR_MLINK, "Too many hard links." },
                { NFSStats.NFSERR_NAMETOOLONG, "The filename in an operation was too long." },
                { NFSStats.NFSERR_NOTEMPTY, "An attempt was made to remove a directory that was not empty." },
                { NFSStats.NFSERR_DQUOT, "Resource (quota) hard limit exceeded. The user's resource limit on the server has been exceeded." },
                { NFSStats.NFSERR_STALE, "Invalid file handle. The file handle given in the arguments was invalid. The file referred to by that file handle no longer exists or access to it has been revoked." },
                { NFSStats.NFSERR_REMOTE, "Too many levels of remote in path. The file handle given in the arguments referred to a file on a non-local file system on the server." },
                { NFSStats.NFSERR_WFLUSH, "The server's write cache used in the WRITECACHE call got flushed to disk." },
                { NFSStats.NFSERR_BADHANDLE, "Illegal NFS file handle. The file handle failed internal consistency checks." },
                { NFSStats.NFSERR_NOT_SYNC, "Update synchronization mismatch was detected during a SETATTR operation." },
                { NFSStats.NFSERR_BAD_COOKIE, "READDIR or READDIRPLUS cookie is stale." },
                { NFSStats.NFSERR_NOTSUPP, "Operation is not supported." },
                { NFSStats.NFSERR_TOOSMALL, "Buffer or request is too small." },
                { NFSStats.NFSERR_SERVERFAULT, "An error occurred on the server which does not map to any of the legal NFS version 3 protocol error values. The client should translate this into an appropriate error. UNIX clients may choose to translate this to EIO." },
                { NFSStats.NFSERR_BADTYPE, "An attempt was made to create an object of a type not supported by the server." },
                { NFSStats.NFSERR_JUKEBOX, "The server initiated the request, but was not able to complete it in a timely fashion. The client should wait and then try the request with a new RPC transaction ID. For example, this error should be returned from a server that supports hierarchical storage and receives a request to process a file that has been migrated. In this case, the server should start the immigration process and respond to client with this error." }
            };

            return rDictionary;
        }

        /// <summary>
        /// Throws an appropriate NFS exception based on the provided error code.
        /// </summary>
        /// <param name="errorCode">The NFS error code.</param>
        /// <exception cref="NFSGeneralException">Thrown for general NFS errors.</exception>
        /// <exception cref="NFSAuthenticationException">Thrown for authentication errors.</exception>
        /// <exception cref="NFSUnauthorizedAccessException">Thrown for unauthorized access errors.</exception>
        /// <exception cref="NFSIOException">Thrown for I/O errors.</exception>
        /// <exception cref="NFSCommunicationException">Thrown for communication errors.</exception>
        public static void ThrowException(NFSStats errorCode)
        {
            if (errorCode != NFSStats.NFS_OK)
            {
                Dictionary<NFSStats, string> exceptionMessages = ExceptionHelpers.ExceptionList();

                if (exceptionMessages.ContainsKey(errorCode))
                {
                    string message = exceptionMessages[errorCode];

                    switch (errorCode)
                    {
                        case NFSStats.NFSERR_ACCES:
                            throw new NFSAuthenticationException(message);

                        case NFSStats.NFSERR_DQUOT:
                        case NFSStats.NFSERR_EXIST:
                        case NFSStats.NFSERR_FBIG:
                        case NFSStats.NFSERR_IO:
                        case NFSStats.NFSERR_ISDIR:
                        case NFSStats.NFSERR_NAMETOOLONG:
                        case NFSStats.NFSERR_NOENT:
                        case NFSStats.NFSERR_NOSPC:
                        case NFSStats.NFSERR_NOTDIR:
                        case NFSStats.NFSERR_NOTEMPTY:
                        case NFSStats.NFSERR_NXIO:
                            throw new NFSIOException(message);

                        case NFSStats.NFSERR_PERM:
                        case NFSStats.NFSERR_ROFS:
                            throw new NFSUnauthorizedAccessException(message);

                        case NFSStats.NFSERR_BADHANDLE:
                        case NFSStats.NFSERR_BADTYPE:
                        case NFSStats.NFSERR_TOOSMALL:
                        case NFSStats.NFSERR_SERVERFAULT:
                        case NFSStats.NFSERR_JUKEBOX:
                            throw new NFSCommunicationException(message);

                        case NFSStats.NFSERR_XDEV:
                        case NFSStats.NFSERR_REMOTE:
                        case NFSStats.NFSERR_NOTSUPP:
                        case NFSStats.NFSERR_NOT_SYNC:
                        case NFSStats.NFSERR_NODEV:
                        case NFSStats.NFSERR_MLINK:
                        case NFSStats.NFSERR_INVAL:
                        case NFSStats.NFSERR_BAD_COOKIE:
                        case NFSStats.NFSERR_STALE:
                        case NFSStats.NFSERR_WFLUSH:
                            throw new NFSGeneralException(message);

                        default:
                            throw new NFSGeneralException("General Exception Occured!");
                    }
                }
                else
                {
                    throw new NFSGeneralException("Unknown Exception Occured!");
                }
            }
        }
    }
}
